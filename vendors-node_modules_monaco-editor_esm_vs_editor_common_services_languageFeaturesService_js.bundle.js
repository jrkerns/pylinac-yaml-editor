"use strict";
(self["webpackChunkpylinac_yaml_editor"] = self["webpackChunkpylinac_yaml_editor"] || []).push([["vendors-node_modules_monaco-editor_esm_vs_editor_common_services_languageFeaturesService_js"],{

/***/ "./node_modules/monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js":
/*!************************************************************************************!*\
  !*** ./node_modules/monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LanguageFeatureRegistry: () => (/* binding */ LanguageFeatureRegistry)
/* harmony export */ });
/* harmony import */ var _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../base/common/event.js */ "./node_modules/monaco-editor/esm/vs/base/common/event.js");
/* harmony import */ var _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../base/common/lifecycle.js */ "./node_modules/monaco-editor/esm/vs/base/common/lifecycle.js");
/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./model.js */ "./node_modules/monaco-editor/esm/vs/editor/common/model.js");
/* harmony import */ var _languageSelector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./languageSelector.js */ "./node_modules/monaco-editor/esm/vs/editor/common/languageSelector.js");
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/




function isExclusive(selector) {
    if (typeof selector === 'string') {
        return false;
    }
    else if (Array.isArray(selector)) {
        return selector.every(isExclusive);
    }
    else {
        return !!selector.exclusive; // TODO: microsoft/TypeScript#42768
    }
}
class MatchCandidate {
    constructor(uri, languageId, notebookUri, notebookType, recursive) {
        this.uri = uri;
        this.languageId = languageId;
        this.notebookUri = notebookUri;
        this.notebookType = notebookType;
        this.recursive = recursive;
    }
    equals(other) {
        return this.notebookType === other.notebookType
            && this.languageId === other.languageId
            && this.uri.toString() === other.uri.toString()
            && this.notebookUri?.toString() === other.notebookUri?.toString()
            && this.recursive === other.recursive;
    }
}
class LanguageFeatureRegistry {
    constructor(_notebookInfoResolver) {
        this._notebookInfoResolver = _notebookInfoResolver;
        this._clock = 0;
        this._entries = [];
        this._onDidChange = new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__.Emitter();
        this.onDidChange = this._onDidChange.event;
    }
    register(selector, provider) {
        let entry = {
            selector,
            provider,
            _score: -1,
            _time: this._clock++
        };
        this._entries.push(entry);
        this._lastCandidate = undefined;
        this._onDidChange.fire(this._entries.length);
        return (0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__.toDisposable)(() => {
            if (entry) {
                const idx = this._entries.indexOf(entry);
                if (idx >= 0) {
                    this._entries.splice(idx, 1);
                    this._lastCandidate = undefined;
                    this._onDidChange.fire(this._entries.length);
                    entry = undefined;
                }
            }
        });
    }
    has(model) {
        return this.all(model).length > 0;
    }
    all(model) {
        if (!model) {
            return [];
        }
        this._updateScores(model, false);
        const result = [];
        // from registry
        for (const entry of this._entries) {
            if (entry._score > 0) {
                result.push(entry.provider);
            }
        }
        return result;
    }
    ordered(model, recursive = false) {
        const result = [];
        this._orderedForEach(model, recursive, entry => result.push(entry.provider));
        return result;
    }
    orderedGroups(model) {
        const result = [];
        let lastBucket;
        let lastBucketScore;
        this._orderedForEach(model, false, entry => {
            if (lastBucket && lastBucketScore === entry._score) {
                lastBucket.push(entry.provider);
            }
            else {
                lastBucketScore = entry._score;
                lastBucket = [entry.provider];
                result.push(lastBucket);
            }
        });
        return result;
    }
    _orderedForEach(model, recursive, callback) {
        this._updateScores(model, recursive);
        for (const entry of this._entries) {
            if (entry._score > 0) {
                callback(entry);
            }
        }
    }
    _updateScores(model, recursive) {
        const notebookInfo = this._notebookInfoResolver?.(model.uri);
        // use the uri (scheme, pattern) of the notebook info iff we have one
        // otherwise it's the model's/document's uri
        const candidate = notebookInfo
            ? new MatchCandidate(model.uri, model.getLanguageId(), notebookInfo.uri, notebookInfo.type, recursive)
            : new MatchCandidate(model.uri, model.getLanguageId(), undefined, undefined, recursive);
        if (this._lastCandidate?.equals(candidate)) {
            // nothing has changed
            return;
        }
        this._lastCandidate = candidate;
        for (const entry of this._entries) {
            entry._score = (0,_languageSelector_js__WEBPACK_IMPORTED_MODULE_3__.score)(entry.selector, candidate.uri, candidate.languageId, (0,_model_js__WEBPACK_IMPORTED_MODULE_2__.shouldSynchronizeModel)(model), candidate.notebookUri, candidate.notebookType);
            if (isExclusive(entry.selector) && entry._score > 0) {
                if (recursive) {
                    entry._score = 0;
                }
                else {
                    // support for one exclusive selector that overwrites
                    // any other selector
                    for (const entry of this._entries) {
                        entry._score = 0;
                    }
                    entry._score = 1000;
                    break;
                }
            }
        }
        // needs sorting
        this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);
    }
    static _compareByScoreAndTime(a, b) {
        if (a._score < b._score) {
            return 1;
        }
        else if (a._score > b._score) {
            return -1;
        }
        // De-prioritize built-in providers
        if (isBuiltinSelector(a.selector) && !isBuiltinSelector(b.selector)) {
            return 1;
        }
        else if (!isBuiltinSelector(a.selector) && isBuiltinSelector(b.selector)) {
            return -1;
        }
        if (a._time < b._time) {
            return 1;
        }
        else if (a._time > b._time) {
            return -1;
        }
        else {
            return 0;
        }
    }
}
function isBuiltinSelector(selector) {
    if (typeof selector === 'string') {
        return false;
    }
    if (Array.isArray(selector)) {
        return selector.some(isBuiltinSelector);
    }
    return Boolean(selector.isBuiltin);
}


/***/ }),

/***/ "./node_modules/monaco-editor/esm/vs/editor/common/languageSelector.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/monaco-editor/esm/vs/editor/common/languageSelector.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   score: () => (/* binding */ score)
/* harmony export */ });
/* harmony import */ var _base_common_glob_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../base/common/glob.js */ "./node_modules/monaco-editor/esm/vs/base/common/glob.js");
/* harmony import */ var _base_common_path_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../base/common/path.js */ "./node_modules/monaco-editor/esm/vs/base/common/path.js");
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/


function score(selector, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType) {
    if (Array.isArray(selector)) {
        // array -> take max individual value
        let ret = 0;
        for (const filter of selector) {
            const value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized, candidateNotebookUri, candidateNotebookType);
            if (value === 10) {
                return value; // already at the highest
            }
            if (value > ret) {
                ret = value;
            }
        }
        return ret;
    }
    else if (typeof selector === 'string') {
        if (!candidateIsSynchronized) {
            return 0;
        }
        // short-hand notion, desugars to
        // 'fooLang' -> { language: 'fooLang'}
        // '*' -> { language: '*' }
        if (selector === '*') {
            return 5;
        }
        else if (selector === candidateLanguage) {
            return 10;
        }
        else {
            return 0;
        }
    }
    else if (selector) {
        // filter -> select accordingly, use defaults for scheme
        const { language, pattern, scheme, hasAccessToAllModels, notebookType } = selector; // TODO: microsoft/TypeScript#42768
        if (!candidateIsSynchronized && !hasAccessToAllModels) {
            return 0;
        }
        // selector targets a notebook -> use the notebook uri instead
        // of the "normal" document uri.
        if (notebookType && candidateNotebookUri) {
            candidateUri = candidateNotebookUri;
        }
        let ret = 0;
        if (scheme) {
            if (scheme === candidateUri.scheme) {
                ret = 10;
            }
            else if (scheme === '*') {
                ret = 5;
            }
            else {
                return 0;
            }
        }
        if (language) {
            if (language === candidateLanguage) {
                ret = 10;
            }
            else if (language === '*') {
                ret = Math.max(ret, 5);
            }
            else {
                return 0;
            }
        }
        if (notebookType) {
            if (notebookType === candidateNotebookType) {
                ret = 10;
            }
            else if (notebookType === '*' && candidateNotebookType !== undefined) {
                ret = Math.max(ret, 5);
            }
            else {
                return 0;
            }
        }
        if (pattern) {
            let normalizedPattern;
            if (typeof pattern === 'string') {
                normalizedPattern = pattern;
            }
            else {
                // Since this pattern has a `base` property, we need
                // to normalize this path first before passing it on
                // because we will compare it against `Uri.fsPath`
                // which uses platform specific separators.
                // Refs: https://github.com/microsoft/vscode/issues/99938
                normalizedPattern = { ...pattern, base: (0,_base_common_path_js__WEBPACK_IMPORTED_MODULE_1__.normalize)(pattern.base) };
            }
            if (normalizedPattern === candidateUri.fsPath || (0,_base_common_glob_js__WEBPACK_IMPORTED_MODULE_0__.match)(normalizedPattern, candidateUri.fsPath)) {
                ret = 10;
            }
            else {
                return 0;
            }
        }
        return ret;
    }
    else {
        return 0;
    }
}


/***/ }),

/***/ "./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ILanguageFeaturesService: () => (/* binding */ ILanguageFeaturesService)
/* harmony export */ });
/* harmony import */ var _platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../platform/instantiation/common/instantiation.js */ "./node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js");
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

const ILanguageFeaturesService = (0,_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_0__.createDecorator)('ILanguageFeaturesService');


/***/ }),

/***/ "./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LanguageFeaturesService: () => (/* binding */ LanguageFeaturesService)
/* harmony export */ });
/* harmony import */ var _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../languageFeatureRegistry.js */ "./node_modules/monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js");
/* harmony import */ var _languageFeatures_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./languageFeatures.js */ "./node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatures.js");
/* harmony import */ var _platform_instantiation_common_extensions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../platform/instantiation/common/extensions.js */ "./node_modules/monaco-editor/esm/vs/platform/instantiation/common/extensions.js");
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/



class LanguageFeaturesService {
    constructor() {
        this.referenceProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.renameProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.newSymbolNamesProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.codeActionProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.definitionProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.typeDefinitionProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.declarationProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.implementationProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentSymbolProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.inlayHintsProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.colorProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.codeLensProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentFormattingEditProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentRangeFormattingEditProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.onTypeFormattingEditProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.signatureHelpProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.hoverProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentHighlightProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.multiDocumentHighlightProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.selectionRangeProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.foldingRangeProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.linkProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.inlineCompletionsProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.inlineEditProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.completionProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.linkedEditingRangeProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentRangeSemanticTokensProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentSemanticTokensProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentDropEditProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
        this.documentPasteEditProvider = new _languageFeatureRegistry_js__WEBPACK_IMPORTED_MODULE_0__.LanguageFeatureRegistry(this._score.bind(this));
    }
    _score(uri) {
        return this._notebookTypeResolver?.(uri);
    }
}
(0,_platform_instantiation_common_extensions_js__WEBPACK_IMPORTED_MODULE_2__.registerSingleton)(_languageFeatures_js__WEBPACK_IMPORTED_MODULE_1__.ILanguageFeaturesService, LanguageFeaturesService, 1 /* InstantiationType.Delayed */);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfbW9uYWNvLWVkaXRvcl9lc21fdnNfZWRpdG9yX2NvbW1vbl9zZXJ2aWNlc19sYW5ndWFnZUZlYXR1cmVzU2VydmljZV9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNxRDtBQUNTO0FBQ1Y7QUFDTjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMERBQU87QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1RUFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQUssc0RBQXNELGlFQUFzQjtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoTEE7QUFDQTtBQUNBO0FBQ0E7QUFDc0U7QUFDaEI7QUFDL0M7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0VBQWdFLFlBQVk7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxrQkFBa0IsK0RBQVM7QUFDakU7QUFDQSw2REFBNkQsMkRBQWdCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQzVHQTtBQUNBO0FBQ0E7QUFDQTtBQUMwRjtBQUNuRixpQ0FBaUMsZ0dBQWU7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0x2RDtBQUNBO0FBQ0E7QUFDQTtBQUN3RTtBQUNQO0FBQ3dCO0FBQ2xGO0FBQ1A7QUFDQSxxQ0FBcUMsZ0ZBQXVCO0FBQzVELGtDQUFrQyxnRkFBdUI7QUFDekQsMENBQTBDLGdGQUF1QjtBQUNqRSxzQ0FBc0MsZ0ZBQXVCO0FBQzdELHNDQUFzQyxnRkFBdUI7QUFDN0QsMENBQTBDLGdGQUF1QjtBQUNqRSx1Q0FBdUMsZ0ZBQXVCO0FBQzlELDBDQUEwQyxnRkFBdUI7QUFDakUsMENBQTBDLGdGQUF1QjtBQUNqRSxzQ0FBc0MsZ0ZBQXVCO0FBQzdELGlDQUFpQyxnRkFBdUI7QUFDeEQsb0NBQW9DLGdGQUF1QjtBQUMzRCxrREFBa0QsZ0ZBQXVCO0FBQ3pFLHVEQUF1RCxnRkFBdUI7QUFDOUUsZ0RBQWdELGdGQUF1QjtBQUN2RSx5Q0FBeUMsZ0ZBQXVCO0FBQ2hFLGlDQUFpQyxnRkFBdUI7QUFDeEQsNkNBQTZDLGdGQUF1QjtBQUNwRSxrREFBa0QsZ0ZBQXVCO0FBQ3pFLDBDQUEwQyxnRkFBdUI7QUFDakUsd0NBQXdDLGdGQUF1QjtBQUMvRCxnQ0FBZ0MsZ0ZBQXVCO0FBQ3ZELDZDQUE2QyxnRkFBdUI7QUFDcEUsc0NBQXNDLGdGQUF1QjtBQUM3RCxzQ0FBc0MsZ0ZBQXVCO0FBQzdELDhDQUE4QyxnRkFBdUI7QUFDckUsdURBQXVELGdGQUF1QjtBQUM5RSxrREFBa0QsZ0ZBQXVCO0FBQ3pFLDRDQUE0QyxnRkFBdUI7QUFDbkUsNkNBQTZDLGdGQUF1QjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQWlCLENBQUMsMEVBQXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHlsaW5hYy15YW1sLWVkaXRvci8uL25vZGVfbW9kdWxlcy9tb25hY28tZWRpdG9yL2VzbS92cy9lZGl0b3IvY29tbW9uL2xhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5LmpzIiwid2VicGFjazovL3B5bGluYWMteWFtbC1lZGl0b3IvLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvZWRpdG9yL2NvbW1vbi9sYW5ndWFnZVNlbGVjdG9yLmpzIiwid2VicGFjazovL3B5bGluYWMteWFtbC1lZGl0b3IvLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvZWRpdG9yL2NvbW1vbi9zZXJ2aWNlcy9sYW5ndWFnZUZlYXR1cmVzLmpzIiwid2VicGFjazovL3B5bGluYWMteWFtbC1lZGl0b3IvLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvZWRpdG9yL2NvbW1vbi9zZXJ2aWNlcy9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi8uLi9iYXNlL2NvbW1vbi9ldmVudC5qcyc7XG5pbXBvcnQgeyB0b0Rpc3Bvc2FibGUgfSBmcm9tICcuLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnO1xuaW1wb3J0IHsgc2hvdWxkU3luY2hyb25pemVNb2RlbCB9IGZyb20gJy4vbW9kZWwuanMnO1xuaW1wb3J0IHsgc2NvcmUgfSBmcm9tICcuL2xhbmd1YWdlU2VsZWN0b3IuanMnO1xuZnVuY3Rpb24gaXNFeGNsdXNpdmUoc2VsZWN0b3IpIHtcbiAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3Rvci5ldmVyeShpc0V4Y2x1c2l2ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gISFzZWxlY3Rvci5leGNsdXNpdmU7IC8vIFRPRE86IG1pY3Jvc29mdC9UeXBlU2NyaXB0IzQyNzY4XG4gICAgfVxufVxuY2xhc3MgTWF0Y2hDYW5kaWRhdGUge1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgbGFuZ3VhZ2VJZCwgbm90ZWJvb2tVcmksIG5vdGVib29rVHlwZSwgcmVjdXJzaXZlKSB7XG4gICAgICAgIHRoaXMudXJpID0gdXJpO1xuICAgICAgICB0aGlzLmxhbmd1YWdlSWQgPSBsYW5ndWFnZUlkO1xuICAgICAgICB0aGlzLm5vdGVib29rVXJpID0gbm90ZWJvb2tVcmk7XG4gICAgICAgIHRoaXMubm90ZWJvb2tUeXBlID0gbm90ZWJvb2tUeXBlO1xuICAgICAgICB0aGlzLnJlY3Vyc2l2ZSA9IHJlY3Vyc2l2ZTtcbiAgICB9XG4gICAgZXF1YWxzKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGVib29rVHlwZSA9PT0gb3RoZXIubm90ZWJvb2tUeXBlXG4gICAgICAgICAgICAmJiB0aGlzLmxhbmd1YWdlSWQgPT09IG90aGVyLmxhbmd1YWdlSWRcbiAgICAgICAgICAgICYmIHRoaXMudXJpLnRvU3RyaW5nKCkgPT09IG90aGVyLnVyaS50b1N0cmluZygpXG4gICAgICAgICAgICAmJiB0aGlzLm5vdGVib29rVXJpPy50b1N0cmluZygpID09PSBvdGhlci5ub3RlYm9va1VyaT8udG9TdHJpbmcoKVxuICAgICAgICAgICAgJiYgdGhpcy5yZWN1cnNpdmUgPT09IG90aGVyLnJlY3Vyc2l2ZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKF9ub3RlYm9va0luZm9SZXNvbHZlcikge1xuICAgICAgICB0aGlzLl9ub3RlYm9va0luZm9SZXNvbHZlciA9IF9ub3RlYm9va0luZm9SZXNvbHZlcjtcbiAgICAgICAgdGhpcy5fY2xvY2sgPSAwO1xuICAgICAgICB0aGlzLl9lbnRyaWVzID0gW107XG4gICAgICAgIHRoaXMuX29uRGlkQ2hhbmdlID0gbmV3IEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkRpZENoYW5nZSA9IHRoaXMuX29uRGlkQ2hhbmdlLmV2ZW50O1xuICAgIH1cbiAgICByZWdpc3RlcihzZWxlY3RvciwgcHJvdmlkZXIpIHtcbiAgICAgICAgbGV0IGVudHJ5ID0ge1xuICAgICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgICBwcm92aWRlcixcbiAgICAgICAgICAgIF9zY29yZTogLTEsXG4gICAgICAgICAgICBfdGltZTogdGhpcy5fY2xvY2srK1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9lbnRyaWVzLnB1c2goZW50cnkpO1xuICAgICAgICB0aGlzLl9sYXN0Q2FuZGlkYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9vbkRpZENoYW5nZS5maXJlKHRoaXMuX2VudHJpZXMubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHRvRGlzcG9zYWJsZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9lbnRyaWVzLmluZGV4T2YoZW50cnkpO1xuICAgICAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbnRyaWVzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q2FuZGlkYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkRpZENoYW5nZS5maXJlKHRoaXMuX2VudHJpZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFzKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsbChtb2RlbCkubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgYWxsKG1vZGVsKSB7XG4gICAgICAgIGlmICghbW9kZWwpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91cGRhdGVTY29yZXMobW9kZWwsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIC8vIGZyb20gcmVnaXN0cnlcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLl9lbnRyaWVzKSB7XG4gICAgICAgICAgICBpZiAoZW50cnkuX3Njb3JlID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVudHJ5LnByb3ZpZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBvcmRlcmVkKG1vZGVsLCByZWN1cnNpdmUgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgdGhpcy5fb3JkZXJlZEZvckVhY2gobW9kZWwsIHJlY3Vyc2l2ZSwgZW50cnkgPT4gcmVzdWx0LnB1c2goZW50cnkucHJvdmlkZXIpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgb3JkZXJlZEdyb3Vwcyhtb2RlbCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IGxhc3RCdWNrZXQ7XG4gICAgICAgIGxldCBsYXN0QnVja2V0U2NvcmU7XG4gICAgICAgIHRoaXMuX29yZGVyZWRGb3JFYWNoKG1vZGVsLCBmYWxzZSwgZW50cnkgPT4ge1xuICAgICAgICAgICAgaWYgKGxhc3RCdWNrZXQgJiYgbGFzdEJ1Y2tldFNjb3JlID09PSBlbnRyeS5fc2NvcmUpIHtcbiAgICAgICAgICAgICAgICBsYXN0QnVja2V0LnB1c2goZW50cnkucHJvdmlkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFzdEJ1Y2tldFNjb3JlID0gZW50cnkuX3Njb3JlO1xuICAgICAgICAgICAgICAgIGxhc3RCdWNrZXQgPSBbZW50cnkucHJvdmlkZXJdO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxhc3RCdWNrZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX29yZGVyZWRGb3JFYWNoKG1vZGVsLCByZWN1cnNpdmUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVNjb3Jlcyhtb2RlbCwgcmVjdXJzaXZlKTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLl9lbnRyaWVzKSB7XG4gICAgICAgICAgICBpZiAoZW50cnkuX3Njb3JlID4gMCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVudHJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfdXBkYXRlU2NvcmVzKG1vZGVsLCByZWN1cnNpdmUpIHtcbiAgICAgICAgY29uc3Qgbm90ZWJvb2tJbmZvID0gdGhpcy5fbm90ZWJvb2tJbmZvUmVzb2x2ZXI/Lihtb2RlbC51cmkpO1xuICAgICAgICAvLyB1c2UgdGhlIHVyaSAoc2NoZW1lLCBwYXR0ZXJuKSBvZiB0aGUgbm90ZWJvb2sgaW5mbyBpZmYgd2UgaGF2ZSBvbmVcbiAgICAgICAgLy8gb3RoZXJ3aXNlIGl0J3MgdGhlIG1vZGVsJ3MvZG9jdW1lbnQncyB1cmlcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gbm90ZWJvb2tJbmZvXG4gICAgICAgICAgICA/IG5ldyBNYXRjaENhbmRpZGF0ZShtb2RlbC51cmksIG1vZGVsLmdldExhbmd1YWdlSWQoKSwgbm90ZWJvb2tJbmZvLnVyaSwgbm90ZWJvb2tJbmZvLnR5cGUsIHJlY3Vyc2l2ZSlcbiAgICAgICAgICAgIDogbmV3IE1hdGNoQ2FuZGlkYXRlKG1vZGVsLnVyaSwgbW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcmVjdXJzaXZlKTtcbiAgICAgICAgaWYgKHRoaXMuX2xhc3RDYW5kaWRhdGU/LmVxdWFscyhjYW5kaWRhdGUpKSB7XG4gICAgICAgICAgICAvLyBub3RoaW5nIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGFzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLl9lbnRyaWVzKSB7XG4gICAgICAgICAgICBlbnRyeS5fc2NvcmUgPSBzY29yZShlbnRyeS5zZWxlY3RvciwgY2FuZGlkYXRlLnVyaSwgY2FuZGlkYXRlLmxhbmd1YWdlSWQsIHNob3VsZFN5bmNocm9uaXplTW9kZWwobW9kZWwpLCBjYW5kaWRhdGUubm90ZWJvb2tVcmksIGNhbmRpZGF0ZS5ub3RlYm9va1R5cGUpO1xuICAgICAgICAgICAgaWYgKGlzRXhjbHVzaXZlKGVudHJ5LnNlbGVjdG9yKSAmJiBlbnRyeS5fc2NvcmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5fc2NvcmUgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBmb3Igb25lIGV4Y2x1c2l2ZSBzZWxlY3RvciB0aGF0IG92ZXJ3cml0ZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYW55IG90aGVyIHNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5fZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuX3Njb3JlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5fc2NvcmUgPSAxMDAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gbmVlZHMgc29ydGluZ1xuICAgICAgICB0aGlzLl9lbnRyaWVzLnNvcnQoTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkuX2NvbXBhcmVCeVNjb3JlQW5kVGltZSk7XG4gICAgfVxuICAgIHN0YXRpYyBfY29tcGFyZUJ5U2NvcmVBbmRUaW1lKGEsIGIpIHtcbiAgICAgICAgaWYgKGEuX3Njb3JlIDwgYi5fc2NvcmUpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEuX3Njb3JlID4gYi5fc2NvcmUpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZS1wcmlvcml0aXplIGJ1aWx0LWluIHByb3ZpZGVyc1xuICAgICAgICBpZiAoaXNCdWlsdGluU2VsZWN0b3IoYS5zZWxlY3RvcikgJiYgIWlzQnVpbHRpblNlbGVjdG9yKGIuc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaXNCdWlsdGluU2VsZWN0b3IoYS5zZWxlY3RvcikgJiYgaXNCdWlsdGluU2VsZWN0b3IoYi5zZWxlY3RvcikpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5fdGltZSA8IGIuX3RpbWUpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGEuX3RpbWUgPiBiLl90aW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQnVpbHRpblNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RvcikpIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yLnNvbWUoaXNCdWlsdGluU2VsZWN0b3IpO1xuICAgIH1cbiAgICByZXR1cm4gQm9vbGVhbihzZWxlY3Rvci5pc0J1aWx0aW4pO1xufVxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBtYXRjaCBhcyBtYXRjaEdsb2JQYXR0ZXJuIH0gZnJvbSAnLi4vLi4vYmFzZS9jb21tb24vZ2xvYi5qcyc7XG5pbXBvcnQgeyBub3JtYWxpemUgfSBmcm9tICcuLi8uLi9iYXNlL2NvbW1vbi9wYXRoLmpzJztcbmV4cG9ydCBmdW5jdGlvbiBzY29yZShzZWxlY3RvciwgY2FuZGlkYXRlVXJpLCBjYW5kaWRhdGVMYW5ndWFnZSwgY2FuZGlkYXRlSXNTeW5jaHJvbml6ZWQsIGNhbmRpZGF0ZU5vdGVib29rVXJpLCBjYW5kaWRhdGVOb3RlYm9va1R5cGUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3RvcikpIHtcbiAgICAgICAgLy8gYXJyYXkgLT4gdGFrZSBtYXggaW5kaXZpZHVhbCB2YWx1ZVxuICAgICAgICBsZXQgcmV0ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBmaWx0ZXIgb2Ygc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc2NvcmUoZmlsdGVyLCBjYW5kaWRhdGVVcmksIGNhbmRpZGF0ZUxhbmd1YWdlLCBjYW5kaWRhdGVJc1N5bmNocm9uaXplZCwgY2FuZGlkYXRlTm90ZWJvb2tVcmksIGNhbmRpZGF0ZU5vdGVib29rVHlwZSk7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOyAvLyBhbHJlYWR5IGF0IHRoZSBoaWdoZXN0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPiByZXQpIHtcbiAgICAgICAgICAgICAgICByZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghY2FuZGlkYXRlSXNTeW5jaHJvbml6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNob3J0LWhhbmQgbm90aW9uLCBkZXN1Z2FycyB0b1xuICAgICAgICAvLyAnZm9vTGFuZycgLT4geyBsYW5ndWFnZTogJ2Zvb0xhbmcnfVxuICAgICAgICAvLyAnKicgLT4geyBsYW5ndWFnZTogJyonIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yID09PSAnKicpIHtcbiAgICAgICAgICAgIHJldHVybiA1O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yID09PSBjYW5kaWRhdGVMYW5ndWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIDEwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgLy8gZmlsdGVyIC0+IHNlbGVjdCBhY2NvcmRpbmdseSwgdXNlIGRlZmF1bHRzIGZvciBzY2hlbWVcbiAgICAgICAgY29uc3QgeyBsYW5ndWFnZSwgcGF0dGVybiwgc2NoZW1lLCBoYXNBY2Nlc3NUb0FsbE1vZGVscywgbm90ZWJvb2tUeXBlIH0gPSBzZWxlY3RvcjsgLy8gVE9ETzogbWljcm9zb2Z0L1R5cGVTY3JpcHQjNDI3NjhcbiAgICAgICAgaWYgKCFjYW5kaWRhdGVJc1N5bmNocm9uaXplZCAmJiAhaGFzQWNjZXNzVG9BbGxNb2RlbHMpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlbGVjdG9yIHRhcmdldHMgYSBub3RlYm9vayAtPiB1c2UgdGhlIG5vdGVib29rIHVyaSBpbnN0ZWFkXG4gICAgICAgIC8vIG9mIHRoZSBcIm5vcm1hbFwiIGRvY3VtZW50IHVyaS5cbiAgICAgICAgaWYgKG5vdGVib29rVHlwZSAmJiBjYW5kaWRhdGVOb3RlYm9va1VyaSkge1xuICAgICAgICAgICAgY2FuZGlkYXRlVXJpID0gY2FuZGlkYXRlTm90ZWJvb2tVcmk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJldCA9IDA7XG4gICAgICAgIGlmIChzY2hlbWUpIHtcbiAgICAgICAgICAgIGlmIChzY2hlbWUgPT09IGNhbmRpZGF0ZVVyaS5zY2hlbWUpIHtcbiAgICAgICAgICAgICAgICByZXQgPSAxMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjaGVtZSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYW5ndWFnZSkge1xuICAgICAgICAgICAgaWYgKGxhbmd1YWdlID09PSBjYW5kaWRhdGVMYW5ndWFnZSkge1xuICAgICAgICAgICAgICAgIHJldCA9IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09ICcqJykge1xuICAgICAgICAgICAgICAgIHJldCA9IE1hdGgubWF4KHJldCwgNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobm90ZWJvb2tUeXBlKSB7XG4gICAgICAgICAgICBpZiAobm90ZWJvb2tUeXBlID09PSBjYW5kaWRhdGVOb3RlYm9va1R5cGUpIHtcbiAgICAgICAgICAgICAgICByZXQgPSAxMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdGVib29rVHlwZSA9PT0gJyonICYmIGNhbmRpZGF0ZU5vdGVib29rVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gTWF0aC5tYXgocmV0LCA1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXR0ZXJuKSB7XG4gICAgICAgICAgICBsZXQgbm9ybWFsaXplZFBhdHRlcm47XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBwYXR0ZXJuIGhhcyBhIGBiYXNlYCBwcm9wZXJ0eSwgd2UgbmVlZFxuICAgICAgICAgICAgICAgIC8vIHRvIG5vcm1hbGl6ZSB0aGlzIHBhdGggZmlyc3QgYmVmb3JlIHBhc3NpbmcgaXQgb25cbiAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHdlIHdpbGwgY29tcGFyZSBpdCBhZ2FpbnN0IGBVcmkuZnNQYXRoYFxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHVzZXMgcGxhdGZvcm0gc3BlY2lmaWMgc2VwYXJhdG9ycy5cbiAgICAgICAgICAgICAgICAvLyBSZWZzOiBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvOTk5MzhcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUGF0dGVybiA9IHsgLi4ucGF0dGVybiwgYmFzZTogbm9ybWFsaXplKHBhdHRlcm4uYmFzZSkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkUGF0dGVybiA9PT0gY2FuZGlkYXRlVXJpLmZzUGF0aCB8fCBtYXRjaEdsb2JQYXR0ZXJuKG5vcm1hbGl6ZWRQYXR0ZXJuLCBjYW5kaWRhdGVVcmkuZnNQYXRoKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbiIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuaW1wb3J0IHsgY3JlYXRlRGVjb3JhdG9yIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvbi5qcyc7XG5leHBvcnQgY29uc3QgSUxhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yKCdJTGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UnKTtcbiIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuaW1wb3J0IHsgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkgfSBmcm9tICcuLi9sYW5ndWFnZUZlYXR1cmVSZWdpc3RyeS5qcyc7XG5pbXBvcnQgeyBJTGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UgfSBmcm9tICcuL2xhbmd1YWdlRmVhdHVyZXMuanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJTaW5nbGV0b24gfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9pbnN0YW50aWF0aW9uL2NvbW1vbi9leHRlbnNpb25zLmpzJztcbmV4cG9ydCBjbGFzcyBMYW5ndWFnZUZlYXR1cmVzU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMucmVuYW1lUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubmV3U3ltYm9sTmFtZXNQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb2RlQWN0aW9uUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvblByb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnR5cGVEZWZpbml0aW9uUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZGVjbGFyYXRpb25Qcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5pbXBsZW1lbnRhdGlvblByb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmRvY3VtZW50U3ltYm9sUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaW5sYXlIaW50c1Byb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbG9yUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29kZUxlbnNQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5kb2N1bWVudEZvcm1hdHRpbmdFZGl0UHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMub25UeXBlRm9ybWF0dGluZ0VkaXRQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5zaWduYXR1cmVIZWxwUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaG92ZXJQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5kb2N1bWVudEhpZ2hsaWdodFByb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLm11bHRpRG9jdW1lbnRIaWdobGlnaHRQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25SYW5nZVByb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmZvbGRpbmdSYW5nZVByb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmxpbmtQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5pbmxpbmVDb21wbGV0aW9uc1Byb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmlubGluZUVkaXRQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21wbGV0aW9uUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubGlua2VkRWRpdGluZ1JhbmdlUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRSYW5nZVNlbWFudGljVG9rZW5zUHJvdmlkZXIgPSBuZXcgTGFuZ3VhZ2VGZWF0dXJlUmVnaXN0cnkodGhpcy5fc2NvcmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRTZW1hbnRpY1Rva2Vuc1Byb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmRvY3VtZW50RHJvcEVkaXRQcm92aWRlciA9IG5ldyBMYW5ndWFnZUZlYXR1cmVSZWdpc3RyeSh0aGlzLl9zY29yZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5kb2N1bWVudFBhc3RlRWRpdFByb3ZpZGVyID0gbmV3IExhbmd1YWdlRmVhdHVyZVJlZ2lzdHJ5KHRoaXMuX3Njb3JlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBfc2NvcmUodXJpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ub3RlYm9va1R5cGVSZXNvbHZlcj8uKHVyaSk7XG4gICAgfVxufVxucmVnaXN0ZXJTaW5nbGV0b24oSUxhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLCBMYW5ndWFnZUZlYXR1cmVzU2VydmljZSwgMSAvKiBJbnN0YW50aWF0aW9uVHlwZS5EZWxheWVkICovKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==