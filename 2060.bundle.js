"use strict";(self.webpackChunkpylinac_yaml_editor=self.webpackChunkpylinac_yaml_editor||[]).push([[2060],{2992:(t,e,s)=>{function i(t,e,s){return Math.min(Math.max(t,e),s)}s.d(e,{Uq:()=>n,mu:()=>r,qE:()=>i});class n{constructor(){this._n=1,this._val=0}update(t){return this._val=this._val+(t-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class r{constructor(t){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(t),this._values.fill(0,0,t)}update(t){const e=this._values[this._index];return this._values[this._index]=t,this._index=(this._index+1)%this._values.length,this._sum-=e,this._sum+=t,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},2060:(t,e,s)=>{s.r(e),s.d(e,{ILanguageFeatureDebounceService:()=>l,LanguageFeatureDebounceService:()=>g});var i=s(2344),n=s(7992),r=s(2992),a=s(8195),u=s(6726),c=s(2399),o=s(6441),h=s(3072),_=function(t,e){return function(s,i){e(s,i,t)}};const l=(0,c.u1)("ILanguageFeatureDebounceService");var d;!function(t){const e=new WeakMap;let s=0;t.of=function(t){let i=e.get(t);return void 0===i&&(i=++s,e.set(t,i)),i}}(d||(d={}));class v{constructor(t){this._default=t}get(t){return this._default}update(t,e){return this._default}default(){return this._default}}class f{constructor(t,e,s,i,r,a){this._logService=t,this._name=e,this._registry=s,this._default=i,this._min=r,this._max=a,this._cache=new n.qK(50,.7)}_key(t){return t.id+this._registry.all(t).reduce(((t,e)=>(0,i.sN)(d.of(e),t)),0)}get(t){const e=this._key(t),s=this._cache.get(e);return s?(0,r.qE)(s.value,this._min,this._max):this.default()}update(t,e){const s=this._key(t);let i=this._cache.get(s);i||(i=new r.mu(6),this._cache.set(s,i));const n=(0,r.qE)(i.update(e),this._min,this._max);return(0,h.v$)(t.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${t.uri.toString()} is ${n}ms`),n}_overall(){const t=new r.Uq;for(const[,e]of this._cache)t.update(e.value);return t.value}default(){const t=0|this._overall()||this._default;return(0,r.qE)(t,this._min,this._max)}}let g=class{constructor(t,e){this._logService=t,this._data=new Map,this._isDev=e.isExtensionDevelopment||!e.isBuilt}for(t,e,s){const i=s?.min??50,n=s?.max??i**2,r=s?.key??void 0,a=`${d.of(t)},${i}${r?","+r:""}`;let u=this._data.get(a);return u||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${e}] is disabled in developed mode`),u=new v(1.5*i)):u=new f(this._logService,e,t,0|this._overallAverage()||1.5*i,i,n),this._data.set(a,u)),u}_overallAverage(){const t=new r.Uq;for(const e of this._data.values())t.update(e.default());return t.value}};g=function(t,e,s,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var u=t.length-1;u>=0;u--)(n=t[u])&&(a=(r<3?n(a):r>3?n(e,s,a):n(e,s))||a);return r>3&&a&&Object.defineProperty(e,s,a),a}([_(0,o.rr),_(1,a.k)],g),(0,u.v)(l,g,1)},8195:(t,e,s)=>{s.d(e,{k:()=>i});const i=(0,s(2399).u1)("environmentService")},3312:(t,e,s)=>{s.d(e,{d:()=>i});class i{constructor(t,e=[],s=!1){this.ctor=t,this.staticArguments=e,this.supportsDelayedInstantiation=s}}},6726:(t,e,s)=>{s.d(e,{N:()=>a,v:()=>r});var i=s(3312);const n=[];function r(t,e,s){e instanceof i.d||(e=new i.d(e,[],Boolean(s))),n.push([t,e])}function a(){return n}},2399:(t,e,s)=>{var i;s.d(e,{_$:()=>i,_Y:()=>n,u1:()=>r}),function(t){t.serviceIds=new Map,t.DI_TARGET="$di$target",t.DI_DEPENDENCIES="$di$dependencies",t.getServiceDependencies=function(e){return e[t.DI_DEPENDENCIES]||[]}}(i||(i={}));const n=r("instantiationService");function r(t){if(i.serviceIds.has(t))return i.serviceIds.get(t);const e=function(t,s,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(t,e,s){e[i.DI_TARGET]===e?e[i.DI_DEPENDENCIES].push({id:t,index:s}):(e[i.DI_DEPENDENCIES]=[{id:t,index:s}],e[i.DI_TARGET]=e)}(e,t,n)};return e.toString=()=>t,i.serviceIds.set(t,e),e}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQU8yRSxFQUFNRyxpQkFBbUIsQ0FBQyxDQUFFckQsS0FBSTJELFVBQ3ZDcEYsRUFBTzJFLEVBQU1FLFdBQWE3RSxFQUVsQyxDQVlRc0YsQ0FBdUI3RCxFQUFJekIsRUFBUW9GLEVBQ3ZDLEVBR0EsT0FGQTNELEVBQUdTLFNBQVcsSUFBTWdELEVBQ3BCUCxFQUFNQyxXQUFXakUsSUFBSXVFLEVBQVd6RCxHQUN6QkEsQ0FDWCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHlsaW5hYy15YW1sLWVkaXRvci8uL25vZGVfbW9kdWxlcy9tb25hY28tZWRpdG9yL2VzbS92cy9iYXNlL2NvbW1vbi9udW1iZXJzLmpzIiwid2VicGFjazovL3B5bGluYWMteWFtbC1lZGl0b3IvLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvZWRpdG9yL2NvbW1vbi9zZXJ2aWNlcy9sYW5ndWFnZUZlYXR1cmVEZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly9weWxpbmFjLXlhbWwtZWRpdG9yLy4vbm9kZV9tb2R1bGVzL21vbmFjby1lZGl0b3IvZXNtL3ZzL3BsYXRmb3JtL2Vudmlyb25tZW50L2NvbW1vbi9lbnZpcm9ubWVudC5qcyIsIndlYnBhY2s6Ly9weWxpbmFjLXlhbWwtZWRpdG9yLy4vbm9kZV9tb2R1bGVzL21vbmFjby1lZGl0b3IvZXNtL3ZzL3BsYXRmb3JtL2luc3RhbnRpYXRpb24vY29tbW9uL2Rlc2NyaXB0b3JzLmpzIiwid2VicGFjazovL3B5bGluYWMteWFtbC1lZGl0b3IvLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vZXh0ZW5zaW9ucy5qcyIsIndlYnBhY2s6Ly9weWxpbmFjLXlhbWwtZWRpdG9yLy4vbm9kZV9tb2R1bGVzL21vbmFjby1lZGl0b3IvZXNtL3ZzL3BsYXRmb3JtL2luc3RhbnRpYXRpb24vY29tbW9uL2luc3RhbnRpYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuZXhwb3J0IGNsYXNzIE1vdmluZ0F2ZXJhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9uID0gMTtcbiAgICAgICAgdGhpcy5fdmFsID0gMDtcbiAgICB9XG4gICAgdXBkYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3ZhbCA9IHRoaXMuX3ZhbCArICh2YWx1ZSAtIHRoaXMuX3ZhbCkgLyB0aGlzLl9uO1xuICAgICAgICB0aGlzLl9uICs9IDE7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWw7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2xpZGluZ1dpbmRvd0F2ZXJhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHNpemUpIHtcbiAgICAgICAgdGhpcy5fbiA9IDA7XG4gICAgICAgIHRoaXMuX3ZhbCA9IDA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuICAgICAgICB0aGlzLl9pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3N1bSA9IDA7XG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IG5ldyBBcnJheShzaXplKTtcbiAgICAgICAgdGhpcy5fdmFsdWVzLmZpbGwoMCwgMCwgc2l6ZSk7XG4gICAgfVxuICAgIHVwZGF0ZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX3ZhbHVlc1t0aGlzLl9pbmRleF07XG4gICAgICAgIHRoaXMuX3ZhbHVlc1t0aGlzLl9pbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5faW5kZXggPSAodGhpcy5faW5kZXggKyAxKSAlIHRoaXMuX3ZhbHVlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX3N1bSAtPSBvbGRWYWx1ZTtcbiAgICAgICAgdGhpcy5fc3VtICs9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fbiA8IHRoaXMuX3ZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuX24gKz0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92YWwgPSB0aGlzLl9zdW0gLyB0aGlzLl9uO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWw7XG4gICAgfVxufVxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19wYXJhbSA9ICh0aGlzICYmIHRoaXMuX19wYXJhbSkgfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufTtcbmltcG9ydCB7IGRvSGFzaCB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL2hhc2guanMnO1xuaW1wb3J0IHsgTFJVQ2FjaGUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9tYXAuanMnO1xuaW1wb3J0IHsgY2xhbXAsIE1vdmluZ0F2ZXJhZ2UsIFNsaWRpbmdXaW5kb3dBdmVyYWdlIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vbnVtYmVycy5qcyc7XG5pbXBvcnQgeyBJRW52aXJvbm1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vZW52aXJvbm1lbnQvY29tbW9uL2Vudmlyb25tZW50LmpzJztcbmltcG9ydCB7IHJlZ2lzdGVyU2luZ2xldG9uIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vZXh0ZW5zaW9ucy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9pbnN0YW50aWF0aW9uL2NvbW1vbi9pbnN0YW50aWF0aW9uLmpzJztcbmltcG9ydCB7IElMb2dTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vbG9nL2NvbW1vbi9sb2cuanMnO1xuaW1wb3J0IHsgbWF0Y2hlc1NjaGVtZSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL25ldHdvcmsuanMnO1xuZXhwb3J0IGNvbnN0IElMYW5ndWFnZUZlYXR1cmVEZWJvdW5jZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3IoJ0lMYW5ndWFnZUZlYXR1cmVEZWJvdW5jZVNlcnZpY2UnKTtcbnZhciBJZGVudGl0eUhhc2g7XG4oZnVuY3Rpb24gKElkZW50aXR5SGFzaCkge1xuICAgIGNvbnN0IF9oYXNoZXMgPSBuZXcgV2Vha01hcCgpO1xuICAgIGxldCBwb29sID0gMDtcbiAgICBmdW5jdGlvbiBvZihvYmopIHtcbiAgICAgICAgbGV0IHZhbHVlID0gX2hhc2hlcy5nZXQob2JqKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gKytwb29sO1xuICAgICAgICAgICAgX2hhc2hlcy5zZXQob2JqLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBJZGVudGl0eUhhc2gub2YgPSBvZjtcbn0pKElkZW50aXR5SGFzaCB8fCAoSWRlbnRpdHlIYXNoID0ge30pKTtcbmNsYXNzIE51bGxEZWJvdW5jZUluZm9ybWF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihfZGVmYXVsdCkge1xuICAgICAgICB0aGlzLl9kZWZhdWx0ID0gX2RlZmF1bHQ7XG4gICAgfVxuICAgIGdldChfbW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHQ7XG4gICAgfVxuICAgIHVwZGF0ZShfbW9kZWwsIF92YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdDtcbiAgICB9XG4gICAgZGVmYXVsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZmF1bHQ7XG4gICAgfVxufVxuY2xhc3MgRmVhdHVyZURlYm91bmNlSW5mb3JtYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKF9sb2dTZXJ2aWNlLCBfbmFtZSwgX3JlZ2lzdHJ5LCBfZGVmYXVsdCwgX21pbiwgX21heCkge1xuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlID0gX2xvZ1NlcnZpY2U7XG4gICAgICAgIHRoaXMuX25hbWUgPSBfbmFtZTtcbiAgICAgICAgdGhpcy5fcmVnaXN0cnkgPSBfcmVnaXN0cnk7XG4gICAgICAgIHRoaXMuX2RlZmF1bHQgPSBfZGVmYXVsdDtcbiAgICAgICAgdGhpcy5fbWluID0gX21pbjtcbiAgICAgICAgdGhpcy5fbWF4ID0gX21heDtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgTFJVQ2FjaGUoNTAsIDAuNyk7XG4gICAgfVxuICAgIF9rZXkobW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIG1vZGVsLmlkICsgdGhpcy5fcmVnaXN0cnkuYWxsKG1vZGVsKS5yZWR1Y2UoKGhhc2hWYWwsIG9iaikgPT4gZG9IYXNoKElkZW50aXR5SGFzaC5vZihvYmopLCBoYXNoVmFsKSwgMCk7XG4gICAgfVxuICAgIGdldChtb2RlbCkge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLl9rZXkobW9kZWwpO1xuICAgICAgICBjb25zdCBhdmcgPSB0aGlzLl9jYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgcmV0dXJuIGF2Z1xuICAgICAgICAgICAgPyBjbGFtcChhdmcudmFsdWUsIHRoaXMuX21pbiwgdGhpcy5fbWF4KVxuICAgICAgICAgICAgOiB0aGlzLmRlZmF1bHQoKTtcbiAgICB9XG4gICAgdXBkYXRlKG1vZGVsLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLl9rZXkobW9kZWwpO1xuICAgICAgICBsZXQgYXZnID0gdGhpcy5fY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIGlmICghYXZnKSB7XG4gICAgICAgICAgICBhdmcgPSBuZXcgU2xpZGluZ1dpbmRvd0F2ZXJhZ2UoNik7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZS5zZXQoa2V5LCBhdmcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gY2xhbXAoYXZnLnVwZGF0ZSh2YWx1ZSksIHRoaXMuX21pbiwgdGhpcy5fbWF4KTtcbiAgICAgICAgaWYgKCFtYXRjaGVzU2NoZW1lKG1vZGVsLnVyaSwgJ291dHB1dCcpKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLnRyYWNlKGBbREVCT1VOQ0U6ICR7dGhpcy5fbmFtZX1dIGZvciAke21vZGVsLnVyaS50b1N0cmluZygpfSBpcyAke25ld1ZhbHVlfW1zYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xuICAgIH1cbiAgICBfb3ZlcmFsbCgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1vdmluZ0F2ZXJhZ2UoKTtcbiAgICAgICAgZm9yIChjb25zdCBbLCBhdmddIG9mIHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICByZXN1bHQudXBkYXRlKGF2Zy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICB9XG4gICAgZGVmYXVsdCgpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSAodGhpcy5fb3ZlcmFsbCgpIHwgMCkgfHwgdGhpcy5fZGVmYXVsdDtcbiAgICAgICAgcmV0dXJuIGNsYW1wKHZhbHVlLCB0aGlzLl9taW4sIHRoaXMuX21heCk7XG4gICAgfVxufVxubGV0IExhbmd1YWdlRmVhdHVyZURlYm91bmNlU2VydmljZSA9IGNsYXNzIExhbmd1YWdlRmVhdHVyZURlYm91bmNlU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoX2xvZ1NlcnZpY2UsIGVudlNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5fbG9nU2VydmljZSA9IF9sb2dTZXJ2aWNlO1xuICAgICAgICB0aGlzLl9kYXRhID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pc0RldiA9IGVudlNlcnZpY2UuaXNFeHRlbnNpb25EZXZlbG9wbWVudCB8fCAhZW52U2VydmljZS5pc0J1aWx0O1xuICAgIH1cbiAgICBmb3IoZmVhdHVyZSwgbmFtZSwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG1pbiA9IGNvbmZpZz8ubWluID8/IDUwO1xuICAgICAgICBjb25zdCBtYXggPSBjb25maWc/Lm1heCA/PyBtaW4gKiogMjtcbiAgICAgICAgY29uc3QgZXh0cmEgPSBjb25maWc/LmtleSA/PyB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGtleSA9IGAke0lkZW50aXR5SGFzaC5vZihmZWF0dXJlKX0sJHttaW59JHtleHRyYSA/ICcsJyArIGV4dHJhIDogJyd9YDtcbiAgICAgICAgbGV0IGluZm8gPSB0aGlzLl9kYXRhLmdldChrZXkpO1xuICAgICAgICBpZiAoIWluZm8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0Rldikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoYFtERUJPVU5DRTogJHtuYW1lfV0gaXMgZGlzYWJsZWQgaW4gZGV2ZWxvcGVkIG1vZGVgKTtcbiAgICAgICAgICAgICAgICBpbmZvID0gbmV3IE51bGxEZWJvdW5jZUluZm9ybWF0aW9uKG1pbiAqIDEuNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvID0gbmV3IEZlYXR1cmVEZWJvdW5jZUluZm9ybWF0aW9uKHRoaXMuX2xvZ1NlcnZpY2UsIG5hbWUsIGZlYXR1cmUsICh0aGlzLl9vdmVyYWxsQXZlcmFnZSgpIHwgMCkgfHwgKG1pbiAqIDEuNSksIC8vIGRlZmF1bHQgaXMgb3ZlcmFsbCBkZWZhdWx0IG9yIGRlcml2ZWQgZnJvbSBtaW4tdmFsdWVcbiAgICAgICAgICAgICAgICBtaW4sIG1heCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9kYXRhLnNldChrZXksIGluZm8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cbiAgICBfb3ZlcmFsbEF2ZXJhZ2UoKSB7XG4gICAgICAgIC8vIEF2ZXJhZ2Ugb2YgYWxsIGxhbmd1YWdlIGZlYXR1cmVzLiBOb3QgYSBncmVhdCB2YWx1ZSBidXQgYW4gYXBwcm94aW1hdGlvblxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgTW92aW5nQXZlcmFnZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGluZm8gb2YgdGhpcy5fZGF0YS52YWx1ZXMoKSkge1xuICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZShpbmZvLmRlZmF1bHQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICB9XG59O1xuTGFuZ3VhZ2VGZWF0dXJlRGVib3VuY2VTZXJ2aWNlID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJTG9nU2VydmljZSksXG4gICAgX19wYXJhbSgxLCBJRW52aXJvbm1lbnRTZXJ2aWNlKVxuXSwgTGFuZ3VhZ2VGZWF0dXJlRGVib3VuY2VTZXJ2aWNlKTtcbmV4cG9ydCB7IExhbmd1YWdlRmVhdHVyZURlYm91bmNlU2VydmljZSB9O1xucmVnaXN0ZXJTaW5nbGV0b24oSUxhbmd1YWdlRmVhdHVyZURlYm91bmNlU2VydmljZSwgTGFuZ3VhZ2VGZWF0dXJlRGVib3VuY2VTZXJ2aWNlLCAxIC8qIEluc3RhbnRpYXRpb25UeXBlLkRlbGF5ZWQgKi8pO1xuIiwiaW1wb3J0IHsgY3JlYXRlRGVjb3JhdG9yIH0gZnJvbSAnLi4vLi4vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvbi5qcyc7XG5leHBvcnQgY29uc3QgSUVudmlyb25tZW50U2VydmljZSA9IGNyZWF0ZURlY29yYXRvcignZW52aXJvbm1lbnRTZXJ2aWNlJyk7XG4iLCIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydCBjbGFzcyBTeW5jRGVzY3JpcHRvciB7XG4gICAgY29uc3RydWN0b3IoY3Rvciwgc3RhdGljQXJndW1lbnRzID0gW10sIHN1cHBvcnRzRGVsYXllZEluc3RhbnRpYXRpb24gPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmN0b3IgPSBjdG9yO1xuICAgICAgICB0aGlzLnN0YXRpY0FyZ3VtZW50cyA9IHN0YXRpY0FyZ3VtZW50cztcbiAgICAgICAgdGhpcy5zdXBwb3J0c0RlbGF5ZWRJbnN0YW50aWF0aW9uID0gc3VwcG9ydHNEZWxheWVkSW5zdGFudGlhdGlvbjtcbiAgICB9XG59XG4iLCIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmltcG9ydCB7IFN5bmNEZXNjcmlwdG9yIH0gZnJvbSAnLi9kZXNjcmlwdG9ycy5qcyc7XG5jb25zdCBfcmVnaXN0cnkgPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNpbmdsZXRvbihpZCwgY3Rvck9yRGVzY3JpcHRvciwgc3VwcG9ydHNEZWxheWVkSW5zdGFudGlhdGlvbikge1xuICAgIGlmICghKGN0b3JPckRlc2NyaXB0b3IgaW5zdGFuY2VvZiBTeW5jRGVzY3JpcHRvcikpIHtcbiAgICAgICAgY3Rvck9yRGVzY3JpcHRvciA9IG5ldyBTeW5jRGVzY3JpcHRvcihjdG9yT3JEZXNjcmlwdG9yLCBbXSwgQm9vbGVhbihzdXBwb3J0c0RlbGF5ZWRJbnN0YW50aWF0aW9uKSk7XG4gICAgfVxuICAgIF9yZWdpc3RyeS5wdXNoKFtpZCwgY3Rvck9yRGVzY3JpcHRvcl0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpbmdsZXRvblNlcnZpY2VEZXNjcmlwdG9ycygpIHtcbiAgICByZXR1cm4gX3JlZ2lzdHJ5O1xufVxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vLyAtLS0tLS0gaW50ZXJuYWwgdXRpbFxuZXhwb3J0IHZhciBfdXRpbDtcbihmdW5jdGlvbiAoX3V0aWwpIHtcbiAgICBfdXRpbC5zZXJ2aWNlSWRzID0gbmV3IE1hcCgpO1xuICAgIF91dGlsLkRJX1RBUkdFVCA9ICckZGkkdGFyZ2V0JztcbiAgICBfdXRpbC5ESV9ERVBFTkRFTkNJRVMgPSAnJGRpJGRlcGVuZGVuY2llcyc7XG4gICAgZnVuY3Rpb24gZ2V0U2VydmljZURlcGVuZGVuY2llcyhjdG9yKSB7XG4gICAgICAgIHJldHVybiBjdG9yW191dGlsLkRJX0RFUEVOREVOQ0lFU10gfHwgW107XG4gICAgfVxuICAgIF91dGlsLmdldFNlcnZpY2VEZXBlbmRlbmNpZXMgPSBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzO1xufSkoX3V0aWwgfHwgKF91dGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBJSW5zdGFudGlhdGlvblNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3IoJ2luc3RhbnRpYXRpb25TZXJ2aWNlJyk7XG5mdW5jdGlvbiBzdG9yZVNlcnZpY2VEZXBlbmRlbmN5KGlkLCB0YXJnZXQsIGluZGV4KSB7XG4gICAgaWYgKHRhcmdldFtfdXRpbC5ESV9UQVJHRVRdID09PSB0YXJnZXQpIHtcbiAgICAgICAgdGFyZ2V0W191dGlsLkRJX0RFUEVOREVOQ0lFU10ucHVzaCh7IGlkLCBpbmRleCB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhcmdldFtfdXRpbC5ESV9ERVBFTkRFTkNJRVNdID0gW3sgaWQsIGluZGV4IH1dO1xuICAgICAgICB0YXJnZXRbX3V0aWwuRElfVEFSR0VUXSA9IHRhcmdldDtcbiAgICB9XG59XG4vKipcbiAqIFRoZSAqb25seSogdmFsaWQgd2F5IHRvIGNyZWF0ZSBhIHt7U2VydmljZUlkZW50aWZpZXJ9fS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlY29yYXRvcihzZXJ2aWNlSWQpIHtcbiAgICBpZiAoX3V0aWwuc2VydmljZUlkcy5oYXMoc2VydmljZUlkKSkge1xuICAgICAgICByZXR1cm4gX3V0aWwuc2VydmljZUlkcy5nZXQoc2VydmljZUlkKTtcbiAgICB9XG4gICAgY29uc3QgaWQgPSBmdW5jdGlvbiAodGFyZ2V0LCBrZXksIGluZGV4KSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0BJU2VydmljZU5hbWUtZGVjb3JhdG9yIGNhbiBvbmx5IGJlIHVzZWQgdG8gZGVjb3JhdGUgYSBwYXJhbWV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICBzdG9yZVNlcnZpY2VEZXBlbmRlbmN5KGlkLCB0YXJnZXQsIGluZGV4KTtcbiAgICB9O1xuICAgIGlkLnRvU3RyaW5nID0gKCkgPT4gc2VydmljZUlkO1xuICAgIF91dGlsLnNlcnZpY2VJZHMuc2V0KHNlcnZpY2VJZCwgaWQpO1xuICAgIHJldHVybiBpZDtcbn1cbiJdLCJuYW1lcyI6WyJjbGFtcCIsInZhbHVlIiwibWluIiwibWF4IiwiTWF0aCIsIk1vdmluZ0F2ZXJhZ2UiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJfbiIsIl92YWwiLCJ1cGRhdGUiLCJTbGlkaW5nV2luZG93QXZlcmFnZSIsInNpemUiLCJfdmFsdWVzIiwiX2luZGV4IiwiX3N1bSIsIkFycmF5IiwiZmlsbCIsIm9sZFZhbHVlIiwibGVuZ3RoIiwiX19wYXJhbSIsInBhcmFtSW5kZXgiLCJkZWNvcmF0b3IiLCJ0YXJnZXQiLCJrZXkiLCJJTGFuZ3VhZ2VGZWF0dXJlRGVib3VuY2VTZXJ2aWNlIiwiSWRlbnRpdHlIYXNoIiwiX2hhc2hlcyIsIldlYWtNYXAiLCJwb29sIiwib2YiLCJvYmoiLCJnZXQiLCJ1bmRlZmluZWQiLCJzZXQiLCJOdWxsRGVib3VuY2VJbmZvcm1hdGlvbiIsIl9kZWZhdWx0IiwiX21vZGVsIiwiX3ZhbHVlIiwiRmVhdHVyZURlYm91bmNlSW5mb3JtYXRpb24iLCJfbG9nU2VydmljZSIsIl9uYW1lIiwiX3JlZ2lzdHJ5IiwiX21pbiIsIl9tYXgiLCJfY2FjaGUiLCJfa2V5IiwibW9kZWwiLCJpZCIsImFsbCIsInJlZHVjZSIsImhhc2hWYWwiLCJhdmciLCJkZWZhdWx0IiwibmV3VmFsdWUiLCJ1cmkiLCJ0cmFjZSIsInRvU3RyaW5nIiwiX292ZXJhbGwiLCJyZXN1bHQiLCJMYW5ndWFnZUZlYXR1cmVEZWJvdW5jZVNlcnZpY2UiLCJlbnZTZXJ2aWNlIiwiX2RhdGEiLCJNYXAiLCJfaXNEZXYiLCJpc0V4dGVuc2lvbkRldmVsb3BtZW50IiwiaXNCdWlsdCIsImZlYXR1cmUiLCJuYW1lIiwiY29uZmlnIiwiZXh0cmEiLCJpbmZvIiwiZGVidWciLCJfb3ZlcmFsbEF2ZXJhZ2UiLCJ2YWx1ZXMiLCJkZWNvcmF0b3JzIiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fZGVjb3JhdGUiLCJJRW52aXJvbm1lbnRTZXJ2aWNlIiwiU3luY0Rlc2NyaXB0b3IiLCJjdG9yIiwic3RhdGljQXJndW1lbnRzIiwic3VwcG9ydHNEZWxheWVkSW5zdGFudGlhdGlvbiIsInJlZ2lzdGVyU2luZ2xldG9uIiwiY3Rvck9yRGVzY3JpcHRvciIsIkJvb2xlYW4iLCJwdXNoIiwiZ2V0U2luZ2xldG9uU2VydmljZURlc2NyaXB0b3JzIiwiX3V0aWwiLCJzZXJ2aWNlSWRzIiwiRElfVEFSR0VUIiwiRElfREVQRU5ERU5DSUVTIiwiZ2V0U2VydmljZURlcGVuZGVuY2llcyIsIklJbnN0YW50aWF0aW9uU2VydmljZSIsImNyZWF0ZURlY29yYXRvciIsInNlcnZpY2VJZCIsImhhcyIsImluZGV4IiwiRXJyb3IiLCJzdG9yZVNlcnZpY2VEZXBlbmRlbmN5Il0sInNvdXJjZVJvb3QiOiIifQ==